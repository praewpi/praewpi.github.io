<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ginger - Portfolio</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Reenie+Beanie&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="site-header"></div>

    <!-- Main Content -->
    <main>
        <div id="aboutme-section"></div>

        
        <!-- Skills Section (loaded from skills.html + data/skills.json) -->
        <div id="skills-section"></div>

        <!-- Experience Section (loaded from experience.html + data/experience.json) -->
        <div id="experience-section"></div>

        <!-- Hobbies Section (loaded from hobbies.html) -->
        <div id="hobbies-section"></div>
    </main>

    <!-- Canvas for ginger drawing â€“ at body level so it spans the full page -->
    <canvas id="draw-canvas" aria-hidden="true"></canvas>

    <div id="site-footer"></div>
            
    <!-- <canvas id="mouse-spot-canvas" aria-hidden="true"></canvas> -->

    <script>
        async function includeHTML(id, url) {
            try {
                const res = await fetch(url);
                if (!res.ok) return;
                document.getElementById(id).innerHTML = await res.text();
            } catch (e) {/* fail silently */ }
        }

        async function init() {
            await includeHTML('site-header', 'header.html');
            await includeHTML('site-footer', 'footer.html');

            // Measure actual header height (sticky wrapper) and set CSS variable
            const siteHeader = document.getElementById('site-header');
            if (siteHeader) {
                const setH = () => document.documentElement.style.setProperty('--header-h', siteHeader.offsetHeight + 'px');
                setH();
                window.addEventListener('resize', setH);
            }

            // load about me section HTML
            await includeHTML('aboutme-section', 'aboutme.html');

            // load shared header behaviors (connect dropdown) and drawing script
            const h = document.createElement('script');
            h.src = 'js/header.js';
            h.onload = function () { if (window.attachConnect) window.attachConnect(); };
            document.body.appendChild(h);

            const s = document.createElement('script');
            s.src = 'js/script_canvas.js';
            document.body.appendChild(s);

            // mouse spot (radial canvas) and smooth follower (dot + border)
            // const ms = document.createElement('script');
            // ms.src = 'js/mouse_spot.js';
            // document.body.appendChild(ms);

            const sf = document.createElement('script');
            sf.src = 'js/smooth_follower.js';
            document.body.appendChild(sf);
            // movable profile card behavior (positioning + drag)
            const mv = document.createElement('script');
            mv.src = 'js/movable_profile.js';
            document.body.appendChild(mv);

            // load skills section HTML, then populate from JSON
            await includeHTML('skills-section', 'skills.html');
            const sk = document.createElement('script');
            sk.src = 'js/skills.js';
            document.body.appendChild(sk);


            // load experience section HTML, then populate from JSON
            await includeHTML('experience-section', 'experience.html');
            const ex = document.createElement('script');
            ex.src = 'js/experience.js';
            document.body.appendChild(ex);

            // load hobbies section HTML
            await includeHTML('hobbies-section', 'hobbies.html');

            // env + likes (env must load first so likes.js can read window.__ENV__)
            const env = document.createElement('script');
            env.src = 'env.js';
            env.onload = function () {
                const lk = document.createElement('script');
                lk.src = 'js/likes.js';
                document.body.appendChild(lk);
            };
            document.body.appendChild(env);
        }
        init();
    </script>
    <script>
        // Toggle visual state without causing page reflow; blur to avoid focus scroll
        document.addEventListener('DOMContentLoaded', function () {
            const g = document.getElementById('ginger-icon');
            if (!g) return;
            g.addEventListener('click', function (e) {
                g.classList.toggle('active');
                // remove focus so browser won't try to scroll element into view
                setTimeout(() => g.blur(), 50);
            });
        });
    </script>
</body>

</html>